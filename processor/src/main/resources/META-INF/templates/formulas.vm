package $package;

import java.math.MathContext;
import java.math.RoundingMode;
import java.math.BigDecimal;
import java.util.logging.Logger;

import javax.annotation.Generated;

import org.bitbucket.easymath.AbstractFormulas;
import org.bitbucket.easymath.logging.FormulaLogSupplier;

@Generated("$generator")
@SuppressWarnings({"all", "warnings", "unchecked", "unused", "cast"})
public class $classname extends AbstractFormulas {

    private static Logger logger = Logger.getLogger(${classname}.class.getName());

	#foreach( $constant in ${constants} )
	  #declareConstant( ${constant.type} ${constant} ${constant.operand} )
	#end

    public $classname() {
        super();
    }

#foreach( $function in ${functions} )
    /**
     * Formula: ${function.name}=${function.formula}
     */
    public ${function.type} compute${utils.capitalize($function.name)}(
        #typedArguments( $function )) {
        #logEntering( $function )
        #check( $function )
        
		#if( ${function.type} == "BigDecimal" )
		  MathContext mc = new MathContext(${function.precision}, RoundingMode.${function.roundingMode});
		#end
        
        // Operations
        #if( ${function.inputs.empty} )
          logger.finest("${function.formula}");
        #else
          logger.finest(new FormulaLogSupplier("${function.formulaFormat}", #arguments( ${function} )));
        #end
        #foreach( $operation in ${function.operations} )
          #declareOperation( $operation )
        #end
        
        logger.exiting(getClass().getName(), "compute${utils.capitalize($function.name)}", ${function.lastOperation});
        return ${function.lastOperation};
    }
    
#end
}
## ----------------------------------------------------------------------------
## arguments
## ----------------------------------------------------------------------------
#macro( arguments $function )
  #foreach( $input in ${function.inputs} )
    ${input}#if( ${foreach.hasNext} ), #end
  #end
#end
## ----------------------------------------------------------------------------
## typedArguments
## ----------------------------------------------------------------------------
#macro( typedArguments $function )
  #foreach( $input in ${function.inputs} )
    ${input.type} ${input}#if( ${foreach.hasNext} ), #end
  #end
#end
## ----------------------------------------------------------------------------
## logEntering
## ----------------------------------------------------------------------------
#macro( logEntering $function )
  #if( ${function.inputs.empty} )
    logger.entering(getClass().getName(), "compute${utils.capitalize($function.name)}");
  #else
    logger.entering(getClass().getName(), "compute${utils.capitalize($function.name)}", new Object[] {#arguments( ${function} )});
  #end
#end
## ----------------------------------------------------------------------------
## check
## ----------------------------------------------------------------------------
#macro( check $function )
  #if( ${function.type} == "BigDecimal" )
    // Method protection block
    #foreach( $input in ${function.inputs} )
      if ($input == null) {
          throw new IllegalArgumentException("Argument '$input' cannot be null.");
      }
    #end
  #end
#end
## ----------------------------------------------------------------------------
## declareConstant
## ----------------------------------------------------------------------------
#macro( declareConstant $type $name $text )
  #if( $type == "double" )
    private static final $type $name = ${text}D;
  #else
    private static final $type $name = new BigDecimal("$text");
  #end
#end
## ----------------------------------------------------------------------------
## declareOperation
## ----------------------------------------------------------------------------
#macro( declareOperation $operation )
  #if( ${operation.operands.size()} == 1 )
    #declareUnary( $operation )
  #else
    #declareBinary( $operation )
  #end
#end
## ----------------------------------------------------------------------------
## declareUnary
## ----------------------------------------------------------------------------
#macro( declareUnary $operation )
  #if( ${operation.type} == "double" )
    #if( ${operation.operator} == '!' )
      ${operation.type} ${operation} = fat(${operation.operand});
    #else
      ${operation.type} ${operation} = ${operation.operand} * (${operation.operator}1);
    #end
  #else
    #if( ${operation.operator} == '!' )
      ${operation.type} ${operation} = fat(${operation.operand}, mc);
    #elseif( ${operation.operator} == '-' )
      ${operation.type} ${operation} = ${operation.operand}.multiply(BigDecimal.ONE.negate(), mc);
    #else
      ${operation.type} ${operation} = ${operation.operand};
    #end
  #end
#end
## ----------------------------------------------------------------------------
## declareBinary
## ----------------------------------------------------------------------------
#macro( declareBinary $operation )
  #if( ${operation.type} == "double" )
    #if( ${operation.operator} == '^' )
      ${operation.type} ${operation} = pow(${operation.leftOperand}, ${operation.rightOperand});
    #elseif( ${operation.operator} == '*' )
      ${operation.type} ${operation} = ${operation.leftOperand} * ${operation.rightOperand};
    #elseif( ${operation.operator} == '/' )
      ${operation.type} ${operation} = ${operation.leftOperand} / ${operation.rightOperand};
    #elseif( ${operation.operator} == '%' )
      ${operation.type} ${operation} = ${operation.leftOperand} % ${operation.rightOperand};
    #elseif( ${operation.operator} == '+' )
      ${operation.type} ${operation} = ${operation.leftOperand} + ${operation.rightOperand};
    #elseif( ${operation.operator} == '-' )
      ${operation.type} ${operation} = ${operation.leftOperand} - ${operation.rightOperand};
    #else
      Operator '${operation.operator}' not found!!!!!!
    #end
  #else
    #if( ${operation.operator} == '^' )
      ${operation.type} ${operation} = pow(${operation.leftOperand}, ${operation.rightOperand}, mc);
    #elseif( ${operation.operator} == '*' )
      ${operation.type} ${operation} = ${operation.leftOperand}.multiply(${operation.rightOperand}, mc);
    #elseif( ${operation.operator} == '/' )
      ${operation.type} ${operation} = ${operation.leftOperand}.divide(${operation.rightOperand}, mc);
    #elseif( ${operation.operator} == '%' )
      ${operation.type} ${operation} = ${operation.leftOperand}.remainder(${operation.rightOperand}, mc);
    #elseif( ${operation.operator} == '+' )
      ${operation.type} ${operation} = ${operation.leftOperand}.add(${operation.rightOperand}, mc);
    #elseif( ${operation.operator} == '-' )
      ${operation.type} ${operation} = ${operation.leftOperand}.subtract(${operation.rightOperand}, mc);
    #else
      Operator '${operation.operator}' not found!!!!!!
    #end
  #end
#end